// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`GraphQL Platform Connector MariaDB generates valid and stable schema & statements 1`] = `"DROP SCHEMA IF EXISTS \`tests_index\`"`;

exports[`GraphQL Platform Connector MariaDB generates valid and stable schema & statements 2`] = `
"CREATE OR REPLACE SCHEMA \`tests_index\`
DEFAULT CHARSET = 'utf8mb4'
DEFAULT COLLATE = 'utf8mb4_unicode_520_ci'"
`;

exports[`GraphQL Platform Connector MariaDB generates valid and stable schema & statements 3`] = `
"CREATE TABLE \`tests_index\`.\`articles\` (
  \`privateId\` INT UNSIGNED AUTO_INCREMENT NOT NULL COMMENT 'This id is used to identify an Article internally',
  \`id\` CHAR(36) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL COMMENT 'This UUID identifies an Article publicly',
  \`status\` ENUM('draft','published','deleted') NOT NULL,
  \`title\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`slug\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`body\` JSON COMMENT 'The article\\'s body',
  \`category_privateId\` INT UNSIGNED,
  \`created_by_id\` CHAR(36) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci',
  \`created_at\` DATETIME(3) NOT NULL,
  \`updated_by_username\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci',
  \`updated_at\` DATETIME(3) NOT NULL,
  \`metas\` JSON COMMENT 'Contains any arbitrary data you want to store alongside the article',
  \`highlighted\` BOOLEAN COMMENT 'Is the article highlighted?',
  \`sponsored\` BOOLEAN COMMENT 'Is the article a partnership?',
  PRIMARY KEY (\`privateId\`),
  UNIQUE \`unq_id\` (\`id\`),
  UNIQUE \`unq_category_slug\` (\`category_privateId\`,\`slug\`),
  FOREIGN KEY \`fk_articles_category_privateId\` (\`category_privateId\`) REFERENCES \`categories\` (\`privateId\`) ON UPDATE RESTRICT ON DELETE RESTRICT,
  FOREIGN KEY \`fk_articles_created_by_id\` (\`created_by_id\`) REFERENCES \`users\` (\`id\`) ON UPDATE RESTRICT ON DELETE RESTRICT,
  FOREIGN KEY \`fk_articles_updated_by_username\` (\`updated_by_username\`) REFERENCES \`users\` (\`username\`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
ENGINE = 'InnoDB'
DEFAULT CHARSET = 'utf8mb4'
DEFAULT COLLATE = 'utf8mb4_unicode_520_ci'
COMMENT 'The article is the main resource, written by the journalists'

CREATE TABLE \`tests_index\`.\`categories\` (
  \`privateId\` INT UNSIGNED AUTO_INCREMENT NOT NULL,
  \`id\` CHAR(36) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`title\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`slug\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`parent_privateId\` INT UNSIGNED,
  \`order\` INT UNSIGNED NOT NULL,
  PRIMARY KEY (\`privateId\`),
  UNIQUE \`unq_id\` (\`id\`),
  UNIQUE \`unq_parent_slug\` (\`parent_privateId\`,\`slug\`),
  UNIQUE \`unq_parent_order\` (\`parent_privateId\`,\`order\`),
  FOREIGN KEY \`fk_categories_parent_privateId\` (\`parent_privateId\`) REFERENCES \`categories\` (\`privateId\`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
ENGINE = 'InnoDB'
DEFAULT CHARSET = 'utf8mb4'
DEFAULT COLLATE = 'utf8mb4_unicode_520_ci'

CREATE TABLE \`tests_index\`.\`tags\` (
  \`id\` CHAR(36) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`deprecated\` BOOLEAN COMMENT 'A tag can be deprecated',
  \`title\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`slug\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`created_at\` DATETIME(3) NOT NULL,
  \`updated_at\` DATETIME(3) NOT NULL,
  PRIMARY KEY (\`id\`),
  UNIQUE \`unq_slug\` (\`slug\`)
)
ENGINE = 'InnoDB'
DEFAULT CHARSET = 'utf8mb4'
DEFAULT COLLATE = 'utf8mb4_unicode_520_ci'

CREATE TABLE \`tests_index\`.\`article_tags\` (
  \`article_privateId\` INT UNSIGNED NOT NULL,
  \`tag_id\` CHAR(36) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`order\` INT UNSIGNED NOT NULL,
  PRIMARY KEY (\`article_privateId\`,\`tag_id\`),
  UNIQUE \`unq_article_order\` (\`article_privateId\`,\`order\`),
  FOREIGN KEY \`fk_article_tags_article_privateId\` (\`article_privateId\`) REFERENCES \`articles\` (\`privateId\`) ON UPDATE RESTRICT ON DELETE RESTRICT,
  FOREIGN KEY \`fk_article_tags_tag_id\` (\`tag_id\`) REFERENCES \`tags\` (\`id\`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
ENGINE = 'InnoDB'
DEFAULT CHARSET = 'utf8mb4'
DEFAULT COLLATE = 'utf8mb4_unicode_520_ci'

CREATE TABLE \`tests_index\`.\`article_tag_moderations\` (
  \`theArticlePrivateId\` INT UNSIGNED NOT NULL,
  \`theTagId\` CHAR(36) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`moderator_id\` CHAR(36) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`moderation\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci',
  PRIMARY KEY (\`theArticlePrivateId\`,\`theTagId\`,\`moderator_id\`),
  FOREIGN KEY \`my_custom_fk_name\` (\`theArticlePrivateId\`,\`theTagId\`) REFERENCES \`article_tags\` (\`article_privateId\`,\`tag_id\`) ON UPDATE RESTRICT ON DELETE RESTRICT,
  FOREIGN KEY \`fk_article_tag_moderations_moderator_id\` (\`moderator_id\`) REFERENCES \`users\` (\`id\`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
ENGINE = 'InnoDB'
DEFAULT CHARSET = 'utf8mb4'
DEFAULT COLLATE = 'utf8mb4_unicode_520_ci'

CREATE TABLE \`tests_index\`.\`users\` (
  \`id\` CHAR(36) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`username\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`created_at\` DATETIME(3) NOT NULL,
  \`last_logged_in_at\` DATETIME(3) NOT NULL,
  PRIMARY KEY (\`id\`),
  UNIQUE \`unq_username\` (\`username\`)
)
ENGINE = 'InnoDB'
DEFAULT CHARSET = 'utf8mb4'
DEFAULT COLLATE = 'utf8mb4_unicode_520_ci'

CREATE TABLE \`tests_index\`.\`user_profiles\` (
  \`theUserId\` CHAR(36) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`birthday\` DATE,
  \`facebook_id\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci',
  \`google_id\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci',
  \`twitter_handle\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci',
  PRIMARY KEY (\`theUserId\`),
  FOREIGN KEY \`fk_user_profiles_theUserId\` (\`theUserId\`) REFERENCES \`users\` (\`id\`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
ENGINE = 'InnoDB'
DEFAULT CHARSET = 'utf8mb4'
DEFAULT COLLATE = 'utf8mb4_unicode_520_ci'

CREATE TABLE \`tests_index\`.\`logs\` (
  \`privateId\` INT UNSIGNED AUTO_INCREMENT NOT NULL,
  \`message\` VARCHAR(255) CHARSET 'utf8mb4' COLLATE 'utf8mb4_unicode_520_ci' NOT NULL,
  \`created_at\` DATETIME(3) NOT NULL,
  PRIMARY KEY (\`privateId\`)
)
ENGINE = 'InnoDB'
DEFAULT CHARSET = 'utf8mb4'
DEFAULT COLLATE = 'utf8mb4_unicode_520_ci'"
`;

exports[`GraphQL Platform Connector MariaDB generates valid and stable schema & statements 4`] = `
"ALTER TABLE \`tests_index\`.\`articles\`
ADD FOREIGN KEY \`fk_articles_category_privateId\` (\`category_privateId\`) REFERENCES \`categories\` (\`privateId\`) ON UPDATE RESTRICT ON DELETE RESTRICT,
ADD FOREIGN KEY \`fk_articles_created_by_id\` (\`created_by_id\`) REFERENCES \`users\` (\`id\`) ON UPDATE RESTRICT ON DELETE RESTRICT,
ADD FOREIGN KEY \`fk_articles_updated_by_username\` (\`updated_by_username\`) REFERENCES \`users\` (\`username\`) ON UPDATE RESTRICT ON DELETE RESTRICT

ALTER TABLE \`tests_index\`.\`categories\`
ADD FOREIGN KEY \`fk_categories_parent_privateId\` (\`parent_privateId\`) REFERENCES \`categories\` (\`privateId\`) ON UPDATE RESTRICT ON DELETE RESTRICT

ALTER TABLE \`tests_index\`.\`article_tags\`
ADD FOREIGN KEY \`fk_article_tags_article_privateId\` (\`article_privateId\`) REFERENCES \`articles\` (\`privateId\`) ON UPDATE RESTRICT ON DELETE RESTRICT,
ADD FOREIGN KEY \`fk_article_tags_tag_id\` (\`tag_id\`) REFERENCES \`tags\` (\`id\`) ON UPDATE RESTRICT ON DELETE RESTRICT

ALTER TABLE \`tests_index\`.\`article_tag_moderations\`
ADD FOREIGN KEY \`my_custom_fk_name\` (\`theArticlePrivateId\`,\`theTagId\`) REFERENCES \`article_tags\` (\`article_privateId\`,\`tag_id\`) ON UPDATE RESTRICT ON DELETE RESTRICT,
ADD FOREIGN KEY \`fk_article_tag_moderations_moderator_id\` (\`moderator_id\`) REFERENCES \`users\` (\`id\`) ON UPDATE RESTRICT ON DELETE RESTRICT

ALTER TABLE \`tests_index\`.\`user_profiles\`
ADD FOREIGN KEY \`fk_user_profiles_theUserId\` (\`theUserId\`) REFERENCES \`users\` (\`id\`) ON UPDATE RESTRICT ON DELETE RESTRICT"
`;
