exports[`Find statement > generates statements for Article 1`] = `
[
  "SELECT JSON_OBJECT(\\n    \\"status\\",\\n    \`articles\`.\`status\`,\\n    \\"title\\",\\n    \`articles\`.\`title\`,\\n    \\"body\\",\\n    \`articles\`.\`body\`,\\n    \\"views\\",\\n    \`articles\`.\`views\`,\\n    \\"score\\",\\n    \`articles\`.\`score\`,\\n    \\"machineTags\\",\\n    \`articles\`.\`machine_tags\`,\\n    \\"metas\\",\\n    \`articles\`.\`metas\`,\\n    \\"tagCount\\",\\n    (\\n      SELECT COUNT(*)\\n      FROM \`article_tags\` AS \`articles>tags\`\\n      WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n    ),\\n    \\"createdAt\\",\\n    \`articles\`.\`created_at\`,\\n    \\"a\\",\\n    JSON_OBJECT(\\n      \\"status\\",\\n      \`articles\`.\`status\`,\\n      \\"title\\",\\n      \`articles\`.\`title\`,\\n      \\"category\\",\\n      IF(\\n        \`articles\`.\`category_private_id\` IS NOT NULL,\\n        (\\n          SELECT JSON_OBJECT(\\"title\\", \`articles>category\`.\`title\`)\\n          FROM \`categories\` AS \`articles>category\`\\n          WHERE \`articles\`.\`category_private_id\` = \`articles>category\`.\`private_id\`\\n          LIMIT 1\\n        ), NULL\\n      )\\n    ),\\n    \\"b\\",\\n    JSON_OBJECT(\\n      \\"status\\",\\n      \`articles\`.\`status\`,\\n      \\"title\\",\\n      \`articles\`.\`title\`,\\n      \\"category\\",\\n      IF(\\n        \`articles\`.\`category_private_id\` IS NOT NULL,\\n        (\\n          SELECT JSON_OBJECT(\\"title\\", \`articles>category\`.\`title\`)\\n          FROM \`categories\` AS \`articles>category\`\\n          WHERE \`articles\`.\`category_private_id\` = \`articles>category\`.\`private_id\`\\n          LIMIT 1\\n        ), NULL\\n      )\\n    ),\\n    \\"upperCasedTitle\\",\\n    JSON_OBJECT(\\n      \\"status\\",\\n      \`articles\`.\`status\`,\\n      \\"title\\",\\n      \`articles\`.\`title\`,\\n      \\"category\\",\\n      IF(\\n        \`articles\`.\`category_private_id\` IS NOT NULL,\\n        (\\n          SELECT JSON_OBJECT(\\"title\\", \`articles>category\`.\`title\`)\\n          FROM \`categories\` AS \`articles>category\`\\n          WHERE \`articles\`.\`category_private_id\` = \`articles>category\`.\`private_id\`\\n          LIMIT 1\\n        ), NULL\\n      ),\\n      \\"tags\\",\\n      (\\n        SELECT JSON_ARRAYAGG(\\n            JSON_OBJECT(\\n              \\"tag\\",\\n              (\\n                SELECT JSON_OBJECT(\\"title\\", \`articles>tags>tag\`.\`title\`)\\n                FROM \`tags\` AS \`articles>tags>tag\`\\n                WHERE \`articles>tags\`.\`tag_id\` = \`articles>tags>tag\`.\`id\`\\n                LIMIT 1\\n              )\\n            )\\n            ORDER BY \`articles>tags\`.\`order\` ASC\\n            LIMIT 2\\n          )\\n        FROM \`article_tags\` AS \`articles>tags\`\\n        WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n      )\\n    ),\\n    \\"c\\",\\n    JSON_OBJECT(\\n      \\"lowerCasedTitle\\",\\n      JSON_OBJECT(\\n        \\"status\\",\\n        \`articles\`.\`status\`,\\n        \\"title\\",\\n        \`articles\`.\`title\`,\\n        \\"category\\",\\n        IF(\\n          \`articles\`.\`category_private_id\` IS NOT NULL,\\n          (\\n            SELECT JSON_OBJECT(\\"title\\", \`articles>category\`.\`title\`)\\n            FROM \`categories\` AS \`articles>category\`\\n            WHERE \`articles\`.\`category_private_id\` = \`articles>category\`.\`private_id\`\\n            LIMIT 1\\n          ), NULL\\n        )\\n      ),\\n      \\"upperCasedTitle\\",\\n      JSON_OBJECT(\\n        \\"status\\",\\n        \`articles\`.\`status\`,\\n        \\"title\\",\\n        \`articles\`.\`title\`,\\n        \\"category\\",\\n        IF(\\n          \`articles\`.\`category_private_id\` IS NOT NULL,\\n          (\\n            SELECT JSON_OBJECT(\\"title\\", \`articles>category\`.\`title\`)\\n            FROM \`categories\` AS \`articles>category\`\\n            WHERE \`articles\`.\`category_private_id\` = \`articles>category\`.\`private_id\`\\n            LIMIT 1\\n          ), NULL\\n        ),\\n        \\"tags\\",\\n        (\\n          SELECT JSON_ARRAYAGG(\\n              JSON_OBJECT(\\n                \\"tag\\",\\n                (\\n                  SELECT JSON_OBJECT(\\"title\\", \`articles>tags>tag\`.\`title\`)\\n                  FROM \`tags\` AS \`articles>tags>tag\`\\n                  WHERE \`articles>tags\`.\`tag_id\` = \`articles>tags>tag\`.\`id\`\\n                  LIMIT 1\\n                )\\n              )\\n              ORDER BY \`articles>tags\`.\`order\` ASC\\n              LIMIT 2\\n            )\\n          FROM \`article_tags\` AS \`articles>tags\`\\n          WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n        )\\n      )\\n    ),\\n    \\"d\\",\\n    JSON_OBJECT(\\n      \\"lowerCasedTitle\\",\\n      JSON_OBJECT(\\n        \\"status\\",\\n        \`articles\`.\`status\`,\\n        \\"title\\",\\n        \`articles\`.\`title\`,\\n        \\"category\\",\\n        IF(\\n          \`articles\`.\`category_private_id\` IS NOT NULL,\\n          (\\n            SELECT JSON_OBJECT(\\"title\\", \`articles>category\`.\`title\`)\\n            FROM \`categories\` AS \`articles>category\`\\n            WHERE \`articles\`.\`category_private_id\` = \`articles>category\`.\`private_id\`\\n            LIMIT 1\\n          ), NULL\\n        )\\n      ),\\n      \\"upperCasedTitle\\",\\n      JSON_OBJECT(\\n        \\"status\\",\\n        \`articles\`.\`status\`,\\n        \\"title\\",\\n        \`articles\`.\`title\`,\\n        \\"category\\",\\n        IF(\\n          \`articles\`.\`category_private_id\` IS NOT NULL,\\n          (\\n            SELECT JSON_OBJECT(\\"title\\", \`articles>category\`.\`title\`)\\n            FROM \`categories\` AS \`articles>category\`\\n            WHERE \`articles\`.\`category_private_id\` = \`articles>category\`.\`private_id\`\\n            LIMIT 1\\n          ), NULL\\n        ),\\n        \\"tags\\",\\n        (\\n          SELECT JSON_ARRAYAGG(\\n              JSON_OBJECT(\\n                \\"tag\\",\\n                (\\n                  SELECT JSON_OBJECT(\\"title\\", \`articles>tags>tag\`.\`title\`)\\n                  FROM \`tags\` AS \`articles>tags>tag\`\\n                  WHERE \`articles>tags\`.\`tag_id\` = \`articles>tags>tag\`.\`id\`\\n                  LIMIT 1\\n                )\\n              )\\n              ORDER BY \`articles>tags\`.\`order\` ASC\\n              LIMIT 2\\n            )\\n          FROM \`article_tags\` AS \`articles>tags\`\\n          WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n        )\\n      )\\n    )\\n  ) as \`Article\`\\nFROM \`articles\`\\nWHERE \`articles\`.\`status\` = 'published'\\nORDER BY \`articles\`.\`created_at\` ASC\\nLIMIT 5"
]
`;

exports[`Find statement > generates statements for Article 2`] = `
[
  "SELECT JSON_OBJECT(\\n    \\"status\\",\\n    \`articles\`.\`status\`,\\n    \\"title\\",\\n    \`articles\`.\`title\`\\n  ) as \`Article\`\\nFROM \`articles\`\\nORDER BY \`articles\`.\`created_at\` ASC\\nLIMIT 5"
]
`;

exports[`Find statement > generates statements for Article 3`] = `
[
  "SELECT JSON_OBJECT(\\n    \\"title\\",\\n    \`articles\`.\`title\`,\\n    \\"category\\",\\n    IF(\\n      \`articles\`.\`category_private_id\` IS NOT NULL,\\n      JSON_OBJECT(\\"_id\\", \`articles\`.\`category_private_id\`),\\n      NULL\\n    )\\n  ) as \`Article\`\\nFROM \`articles\`\\nWHERE NOT \`articles\`.\`category_private_id\` IS NOT NULL\\nLIMIT 5"
]
`;

exports[`Find statement > generates statements for Article 4`] = `
[
  "SELECT JSON_OBJECT(\\n    \\"title\\",\\n    \`articles\`.\`title\`,\\n    \\"category\\",\\n    IF(\\n      \`articles\`.\`category_private_id\` IS NOT NULL,\\n      JSON_OBJECT(\\"_id\\", \`articles\`.\`category_private_id\`),\\n      NULL\\n    )\\n  ) as \`Article\`\\nFROM \`articles\`\\nWHERE (\\n    \`articles\`.\`category_private_id\` IS NOT NULL\\n    AND \`articles\`.\`category_private_id\` = 5\\n  )\\nLIMIT 5"
]
`;

exports[`Find statement > generates statements for Article 5`] = `
[
  "SELECT JSON_OBJECT(\\n    \\"status\\",\\n    \`articles\`.\`status\`,\\n    \\"title\\",\\n    \`articles\`.\`title\`,\\n    \\"category\\",\\n    IF(\\n      \`articles\`.\`category_private_id\` IS NOT NULL,\\n      (\\n        SELECT JSON_OBJECT(\\"title\\", \`articles>category\`.\`title\`)\\n        FROM \`categories\` AS \`articles>category\`\\n        WHERE \`articles\`.\`category_private_id\` = \`articles>category\`.\`private_id\`\\n        LIMIT 1\\n      ), NULL\\n    ),\\n    \\"createdBy\\",\\n    IF(\\n      \`articles\`.\`created_by_id\` IS NOT NULL,\\n      (\\n        SELECT JSON_OBJECT(\\n            \\"username\\",\\n            \`articles>createdBy\`.\`username\`,\\n            \\"profile\\",\\n            (\\n              SELECT JSON_OBJECT(\\n                  \\"facebookId\\",\\n                  \`articles>createdBy>profile\`.\`facebook_id\`,\\n                  \\"googleId\\",\\n                  \`articles>createdBy>profile\`.\`google_id\`,\\n                  \\"twitterHandle\\",\\n                  \`articles>createdBy>profile\`.\`twitter_handle\`\\n                )\\n              FROM \`user_profiles\` AS \`articles>createdBy>profile\`\\n              WHERE \`articles>createdBy>profile\`.\`theUserId\` = \`articles>createdBy\`.\`id\`\\n              LIMIT 1\\n            )\\n          )\\n        FROM \`users\` AS \`articles>createdBy\`\\n        WHERE \`articles\`.\`created_by_id\` = \`articles>createdBy\`.\`id\`\\n        LIMIT 1\\n      ), NULL\\n    ),\\n    \\"allTagCount\\",\\n    (\\n      SELECT COUNT(*)\\n      FROM \`article_tags\` AS \`articles>tags\`\\n      WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n    ),\\n    \\"filteredTagCount\\",\\n    (\\n      SELECT COUNT(*)\\n      FROM \`article_tags\` AS \`articles>tags\`\\n      WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n        AND NOT EXISTS (\\n          SELECT *\\n          FROM \`tags\` AS \`articles>tags>tag\`\\n          WHERE \`articles>tags\`.\`tag_id\` = \`articles>tags>tag\`.\`id\`\\n            AND \`articles>tags>tag\`.\`deprecated\` = 1\\n          LIMIT 1\\n        )\\n    ), \\"allTags\\", (\\n      SELECT JSON_ARRAYAGG(\\n          JSON_OBJECT(\\n            \\"order\\",\\n            \`articles>tags\`.\`order\`,\\n            \\"tag\\",\\n            (\\n              SELECT JSON_OBJECT(\\n                  \\"title\\",\\n                  \`articles>tags>tag\`.\`title\`,\\n                  \\"deprecated\\",\\n                  \`articles>tags>tag\`.\`deprecated\`\\n                )\\n              FROM \`tags\` AS \`articles>tags>tag\`\\n              WHERE \`articles>tags\`.\`tag_id\` = \`articles>tags>tag\`.\`id\`\\n              LIMIT 1\\n            )\\n          )\\n          ORDER BY \`articles>tags\`.\`order\` ASC\\n          LIMIT 5\\n        )\\n      FROM \`article_tags\` AS \`articles>tags\`\\n      WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n    ),\\n    \\"filteredTags\\",\\n    (\\n      SELECT JSON_ARRAYAGG(\\n          JSON_OBJECT(\\n            \\"order\\",\\n            \`articles>tags\`.\`order\`,\\n            \\"tag\\",\\n            (\\n              SELECT JSON_OBJECT(\\"title\\", \`articles>tags>tag\`.\`title\`)\\n              FROM \`tags\` AS \`articles>tags>tag\`\\n              WHERE \`articles>tags\`.\`tag_id\` = \`articles>tags>tag\`.\`id\`\\n              LIMIT 1\\n            )\\n          )\\n          ORDER BY \`articles>tags\`.\`order\` ASC\\n          LIMIT 5\\n        )\\n      FROM \`article_tags\` AS \`articles>tags\`\\n      WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n        AND NOT EXISTS (\\n          SELECT *\\n          FROM \`tags\` AS \`articles>tags>tag\`\\n          WHERE \`articles>tags\`.\`tag_id\` = \`articles>tags>tag\`.\`id\`\\n            AND \`articles>tags>tag\`.\`deprecated\` = 1\\n          LIMIT 1\\n        )\\n    )\\n  ) as \`Article\`\\nFROM \`articles\`\\nWHERE (\\n    \`articles\`.\`status\` = 'published'\\n    AND (\\n      \`articles\`.\`category_private_id\` IS NOT NULL\\n      AND EXISTS (\\n        SELECT *\\n        FROM \`categories\` AS \`articles>category\`\\n        WHERE \`articles\`.\`category_private_id\` = \`articles>category\`.\`private_id\`\\n          AND \`articles>category\`.\`slug\` = 'tv'\\n        LIMIT 1\\n      )\\n    )\\n    AND (\\n      \`articles\`.\`created_by_id\` IS NOT NULL\\n      AND EXISTS (\\n        SELECT *\\n        FROM \`users\` AS \`articles>createdBy\`\\n        WHERE \`articles\`.\`created_by_id\` = \`articles>createdBy\`.\`id\`\\n          AND EXISTS (\\n            SELECT *\\n            FROM \`user_profiles\` AS \`articles>createdBy>profile\`\\n            WHERE \`articles>createdBy>profile\`.\`theUserId\` = \`articles>createdBy\`.\`id\`\\n              AND (\\n                \`articles>createdBy>profile\`.\`facebook_id\` IS NOT NULL\\n                OR \`articles>createdBy>profile\`.\`google_id\` IS NOT NULL\\n                OR \`articles>createdBy>profile\`.\`twitter_handle\` IS NOT NULL\\n              )\\n            LIMIT 1\\n          )\\n        LIMIT 1\\n      )\\n    )\\n    AND \`articles\`.\`created_at\` >= '2022-01-01 00:00:00.000'\\n    AND EXISTS (\\n      SELECT *\\n      FROM \`article_tags\` AS \`articles>tags\`\\n      WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n        AND EXISTS (\\n          SELECT *\\n          FROM \`tags\` AS \`articles>tags>tag\`\\n          WHERE \`articles>tags\`.\`tag_id\` = \`articles>tags>tag\`.\`id\`\\n            AND (\\n              \`articles>tags>tag\`.\`deprecated\` IS NULL\\n              OR \`articles>tags>tag\`.\`deprecated\` != 1\\n            )\\n          LIMIT 1\\n        )\\n    )\\n    AND (\\n      SELECT COUNT(*)\\n      FROM \`article_tags\` AS \`articles>tags\`\\n      WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n    ) > 5\\n    AND (\\n      \`articles\`.\`body\` IS NULL\\n      OR JSON_SEARCH(\\n        \`articles\`.\`body\`,\\n        'one',\\n        '%my searched text here%',\\n        NULL,\\n        '$.blocks[*].text'\\n      ) IS NOT NULL\\n      OR JSON_SEARCH(\\n        \`articles\`.\`body\`,\\n        'one',\\n        'my starting text here%',\\n        NULL,\\n        '$.blocks[0].text'\\n      ) IS NOT NULL\\n      OR JSON_SEARCH(\\n        \`articles\`.\`body\`,\\n        'one',\\n        '%my ending text here',\\n        NULL,\\n        '$.blocks[last].text'\\n      ) IS NOT NULL\\n    )\\n  )\\nORDER BY \`articles\`.\`created_at\` ASC\\nLIMIT 5"
]
`;

exports[`Find statement > generates statements for Article 6`] = `
[
  "SELECT JSON_OBJECT(\\n    \\"title\\",\\n    \`articles\`.\`title\`,\\n    \\"second\\",\\n    (\\n      SELECT JSON_ARRAYAGG(\\n          JSON_OBJECT(\\"order\\", \`articles>tags\`.\`order\`)\\n          ORDER BY \`articles>tags\`.\`order\` ASC\\n          LIMIT 1 OFFSET 1\\n        )\\n      FROM \`article_tags\` AS \`articles>tags\`\\n      WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n    ),\\n    \\"penultimate\\",\\n    (\\n      SELECT JSON_ARRAYAGG(\\n          JSON_OBJECT(\\"order\\", \`articles>tags\`.\`order\`)\\n          ORDER BY \`articles>tags\`.\`order\` DESC\\n          LIMIT 1 OFFSET 1\\n        )\\n      FROM \`article_tags\` AS \`articles>tags\`\\n      WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n    ),\\n    \\"all\\",\\n    (\\n      SELECT JSON_ARRAYAGG(\\n          JSON_OBJECT(\\"order\\", \`articles>tags\`.\`order\`)\\n          ORDER BY \`articles>tags\`.\`order\` ASC\\n          LIMIT 10\\n        )\\n      FROM \`article_tags\` AS \`articles>tags\`\\n      WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n    )\\n  ) as \`Article\`\\nFROM \`articles\`\\nWHERE (\\n    SELECT COUNT(*)\\n    FROM \`article_tags\` AS \`articles>tags\`\\n    WHERE \`articles>tags\`.\`article_private_id\` = \`articles\`.\`private_id\`\\n  ) > 1\\nORDER BY \`articles\`.\`created_at\` ASC\\nLIMIT 1"
]
`;

exports[`Find statement > generates statements for ArticleTagModeration 1`] = `
[
  "SELECT JSON_OBJECT(\\n    \\"moderation\\",\\n    \`article_tag_moderations\`.\`moderation\`,\\n    \\"articleTag\\",\\n    JSON_OBJECT(\\n      \\"article\\",\\n      JSON_OBJECT(\\n        \\"_id\\",\\n        \`article_tag_moderations\`.\`theArticlePrivateId\`\\n      ),\\n      \\"tag\\",\\n      JSON_OBJECT(\\"id\\", \`article_tag_moderations\`.\`theTagId\`)\\n    )\\n  ) as \`ArticleTagModeration\`\\nFROM \`article_tag_moderations\`\\nWHERE (\\n    (\\n      \`article_tag_moderations\`.\`theArticlePrivateId\` = 5\\n      AND \`article_tag_moderations\`.\`theTagId\` = '5d6e37f3-0416-4f4a-a405-66b67cc590b9'\\n    )\\n    AND \`article_tag_moderations\`.\`moderation\` IS NOT NULL\\n  )\\nLIMIT 1"
]
`;

exports[`Find statement > generates statements for Category 1`] = `
[
  "SELECT JSON_OBJECT(\\n    \\"title\\",\\n    \`categories\`.\`title\`,\\n    \\"childCount\\",\\n    (\\n      SELECT COUNT(*)\\n      FROM \`categories\` AS \`categories>children\`\\n      WHERE \`categories>children\`.\`parent_private_id\` = \`categories\`.\`private_id\`\\n    ),\\n    \\"children\\",\\n    (\\n      SELECT JSON_ARRAYAGG(\\n          JSON_OBJECT(\\n            \\"parent\\",\\n            IF(\\n              \`categories>children\`.\`parent_private_id\` IS NOT NULL,\\n              (\\n                SELECT JSON_OBJECT(\\"title\\", \`categories>children>parent\`.\`title\`)\\n                FROM \`categories\` AS \`categories>children>parent\`\\n                WHERE \`categories>children\`.\`parent_private_id\` = \`categories>children>parent\`.\`private_id\`\\n                LIMIT 1\\n              ), NULL\\n            ),\\n            \\"title\\",\\n            \`categories>children\`.\`title\`\\n          )\\n          LIMIT 10\\n        )\\n      FROM \`categories\` AS \`categories>children\`\\n      WHERE \`categories>children\`.\`parent_private_id\` = \`categories\`.\`private_id\`\\n    )\\n  ) as \`Category\`\\nFROM \`categories\`\\nWHERE NOT \`categories\`.\`parent_private_id\` IS NOT NULL\\nLIMIT 1"
]
`;
